(()=>{"use strict";const e=class{constructor(e,t,o=""){this.title=e,this.description=t,this.dueDate=o}getTitle(){return this.title}setTitle(e){return this.title=e}getDescription(){return this.description}setDescription(e){return this.description=e}getDueDate(){if(""==this.dueDate){let e=new Date;return e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear()}return this.dueDate}setDate(e){return this.dueDate=e}},t=class{constructor(e){this.name=e,this.todos=[]}getName(){return this.name}setName(e){return this.name=e}getTodos(){return this.todos}getTodo(e){return this.todos.find((t=>t.title===e.title))}addTodo(e){this.todos.find((t=>t.title===e.title))||this.todos.push(e)}deleteTodo(e){return this.todos=this.todos.filter((t=>t.title!==e))}};function o(e,t){return new Date(t,e,0).getDate()}function s(e,t,s){let n=new Date,d=n.getDate(),i=n.getMonth()+1,l=n.getFullYear(),a=d+"-"+i+"-"+l;for(let n=0;n<e.getTodos().length;n++){let r=e.getTodos()[n],c=r.getDueDate(),u=c.split("-"),h=Number(u[0]),g=Number(u[1]),m=Number(u[2]),p=d+6,T=i,D=l;p>o(i,l)&&(p=1,T+=1,13===T&&(T=1,D+=1));let v=new Date,f=new Date(D,T-1,p),b=new Date(m,g-1,h);b>=v&&b<=f&&(t.addTodo(r),e.deleteTodo(r.title)),c===a&&(s.addTodo(r),e.deleteTodo(r.title))}}function n(e,t,o){let n=new Date,d=n.getDate()+"-"+(n.getMonth()+1)+"-"+n.getFullYear();for(let n=0;n<t.getTodos().length;n++){let i=t.getTodos()[n];i.getDueDate()===d&&(o.addTodo(i),t.deleteTodo(i.title)),s(e,t,o)}}let d=new e("Todo 5","new test for date sorting","15-1-2025"),i=new e("Month test","testing month sort","26-1-2025");const l=new class{constructor(){this.projects=[],this.projects.push(new t("Today")),this.projects.push(new t("This Week")),this.projects.push(new t("This Month"))}getProjects(){return this.projects}getProject(e){return this.projects.find((t=>t.name===e))}addProject(e){this.projects.find((t=>t.name===e.name))||this.projects.push(e)}sortTodos(){let e=this.getProject("Today"),t=this.getProject("This Month"),o=this.getProject("This Week");s(t,o,e),n(t,o,e),function(e,t,o){let d=new Date,i=d.getDate()+"-"+(d.getMonth()+1)+"-"+d.getFullYear();for(let d=0;d<o.getTodos().length;d++){let l=o.getTodos()[d];l.getDueDate()!=i&&(e.addTodo(l),o.deleteTodo(l.title),s(e,t),n(e,t,o))}}(t,o,e)}},a=l.getProject("Today"),r=l.getProject("This Week"),c=l.getProject("This Month");a.addTodo(d),c.addTodo(i),l.sortTodos();const u=document.querySelector(".main-board"),h=document.querySelector(".button-box"),g=document.querySelector(".todo-form"),m=document.querySelector(".create-todo-btn");function p(){u.textContent="";let e=["#FAEDCB","#C9E4DE","#C6DEF1","#D8CDF0","#F2C6DE","#F7D9C4"];for(let t=0;t<l.getProjects().length;t++){let o=T(l.getProjects()[t]),s=Math.floor(5*Math.random())+0,n=e[s];o.childNodes[0].style.backgroundColor=n,e.splice(s,1),u.appendChild(o)}}function T(e){const t=document.createElement("div");t.classList.add("project-box");const o=document.createElement("p");o.classList.add("project-header"),o.textContent=e.name;const s=e.getTodos();if(t.appendChild(o),0!=s.length){const e=document.createElement("div");e.classList.add("todo-box"),e.classList.add("visible");for(let t=0;t<s.length;t++){let o=D(s[t]);o.style.backgroundColor=t%2==1?"#e4e4e4":"white",e.appendChild(o)}t.appendChild(e),t.addEventListener("click",(t=>{e.classList.toggle("visible")}))}return t}function D(e){const t=document.createElement("div");t.classList.add("todo");const o=document.createElement("input");o.setAttribute("type","checkbox"),o.setAttribute("checked-id","checkbox");const s=document.createElement("p");s.classList.add("todo-title"),s.textContent=e.title;const n=document.createElement("p");n.classList.add("todo-date"),n.textContent=e.getDueDate();const d=document.createElement("div");d.classList.add("check-title-date"),d.append(o,s,n);const i=document.createElement("p");return i.classList.add("todo-description"),i.textContent=e.description,t.addEventListener("click",(e=>{e.target!=s&&i.classList.toggle("visible")})),s.addEventListener("click",(()=>{s.contentEditable=!0})),t.append(d,i),t}h.addEventListener("click",(()=>{g.classList.toggle("invisible");let e=g.elements.item(0),t=g.elements.item(1),o=g.elements.item(2),s=g.elements.item(3);t.value="",o.value="",s.value="",e.value="today"})),m.addEventListener("click",(t=>{t.preventDefault();let o=g.elements.item(0),s=g.elements.item(1),n=g.elements.item(2),d=g.elements.item(3);if(""===d.value){const t=new e(s.value,n.value);"today"===o.value?a.addTodo(t):"this week"===o.value?r.addTodo(t):"this month"===o.value&&c.addTodo(t)}else{let t=function(e){let t=e.split("-"),o=new Date(t[0],t[1],t[2]);return`${o.getDate()}-${o.getMonth()}-${o.getFullYear()}`}(d.value);const i=new e(s.value,n.value,t);"today"===o.value?a.addTodo(i):"this week"===o.value?r.addTodo(i):"this month"===o.value&&c.addTodo(i)}o.value="today",s.value="",n.value="",d.value="",g.classList.add("invisible"),l.sortTodos(),p()})),p()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SCxFQUFRRyxNQUNWL0MsRUFBVzlDLFFBQVErRixHQUNRLGNBQWxCTCxFQUFRRyxNQUNqQjlDLEVBQVUvQyxRQUFRK0YsR0FDUyxlQUFsQkwsRUFBUUcsT0FDakI3QyxFQUFXaEQsUUFBUStGLEVBRXZCLEtBQU8sQ0FDTCxJQUFJQyxFQXlCUixTQUFzQm5GLEdBQ3BCLElBQUlLLEVBQVlMLEVBQUtNLE1BQU0sS0FDdkJuQyxFQUFVLElBQUlDLEtBQUtpQyxFQUFVLEdBQUlBLEVBQVUsR0FBSUEsRUFBVSxJQUs3RCxNQUFPLEdBSkdsQyxFQUFRRSxhQUNORixFQUFRRyxjQUNUSCxFQUFRSSxlQUdyQixDQWpDNkI2RyxDQUFhMUgsRUFBUXNILE9BQzlDLE1BQU1FLEVBQVUsSUFBSSxFQUNsQjFILEVBQU13SCxNQUNOdkgsRUFBWXVILE1BQ1pHLEdBR29CLFVBQWxCTixFQUFRRyxNQUNWL0MsRUFBVzlDLFFBQVErRixHQUNRLGNBQWxCTCxFQUFRRyxNQUNqQjlDLEVBQVUvQyxRQUFRK0YsR0FDUyxlQUFsQkwsRUFBUUcsT0FDakI3QyxFQUFXaEQsUUFBUStGLEVBRXZCLENBRUFMLEVBQVFHLE1BQVEsUUFDaEJ4SCxFQUFNd0gsTUFBUSxHQUNkdkgsRUFBWXVILE1BQVEsR0FDcEJ0SCxFQUFRc0gsTUFBUSxHQUNoQnhDLEVBQVNtQixVQUFVQyxJQUFJLGFBQ3ZCeEMsRUFBU1EsWUFDVGMsR0FBYyxJQStDaEJBLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy90b2RvLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL3Byb2plY3QuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvVG9kb3MuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgVG9kbyB7XHJcbiAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlID0gXCJcIikge1xyXG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xyXG4gICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcclxuICB9XHJcblxyXG4gIGdldFRpdGxlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudGl0bGU7XHJcbiAgfVxyXG5cclxuICBzZXRUaXRsZShuZXdUaXRsZSkge1xyXG4gICAgcmV0dXJuICh0aGlzLnRpdGxlID0gbmV3VGl0bGUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGVzY3JpcHRpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5kZXNjcmlwdGlvbjtcclxuICB9XHJcblxyXG4gIHNldERlc2NyaXB0aW9uKG5ld0Rlc2NyaXB0aW9uKSB7XHJcbiAgICByZXR1cm4gKHRoaXMuZGVzY3JpcHRpb24gPSBuZXdEZXNjcmlwdGlvbik7XHJcbiAgfVxyXG5cclxuICBnZXREdWVEYXRlKCkge1xyXG4gICAgaWYgKHRoaXMuZHVlRGF0ZSA9PSBcIlwiKSB7XHJcbiAgICAgIGxldCBuZXdEYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgbGV0IGRheSA9IG5ld0RhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgICBsZXQgbW9udGggPSBuZXdEYXRlLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgICBsZXQgeWVhciA9IG5ld0RhdGUuZ2V0RnVsbFllYXIoKTtcclxuXHJcbiAgICAgIGxldCB0b2RheSA9IGRheSArIFwiLVwiICsgbW9udGggKyBcIi1cIiArIHllYXI7XHJcblxyXG4gICAgICByZXR1cm4gdG9kYXk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gdGhpcy5kdWVEYXRlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RGF0ZShuZXdEYXRlKSB7XHJcbiAgICByZXR1cm4gKHRoaXMuZHVlRGF0ZSA9IG5ld0RhdGUpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBUb2RvO1xyXG4iLCJjbGFzcyBQcm9qZWN0IHtcclxuICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy50b2RvcyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgZ2V0TmFtZSgpIHtcclxuICAgIHJldHVybiB0aGlzLm5hbWU7XHJcbiAgfVxyXG5cclxuICBzZXROYW1lKG5ld05hbWUpIHtcclxuICAgIHJldHVybiAodGhpcy5uYW1lID0gbmV3TmFtZSk7XHJcbiAgfVxyXG5cclxuICBnZXRUb2RvcygpIHtcclxuICAgIHJldHVybiB0aGlzLnRvZG9zO1xyXG4gIH1cclxuXHJcbiAgZ2V0VG9kbyhjaG9zZW5Ub2RvT2JqZWN0KSB7XHJcbiAgICByZXR1cm4gdGhpcy50b2Rvcy5maW5kKCh0b2RvKSA9PiB0b2RvLnRpdGxlID09PSBjaG9zZW5Ub2RvT2JqZWN0LnRpdGxlKTtcclxuICB9XHJcblxyXG4gIGFkZFRvZG8odG9kb09iamVjdCkge1xyXG4gICAgaWYgKHRoaXMudG9kb3MuZmluZCgodG9kbykgPT4gdG9kby50aXRsZSA9PT0gdG9kb09iamVjdC50aXRsZSkpIHJldHVybjtcclxuICAgIHRoaXMudG9kb3MucHVzaCh0b2RvT2JqZWN0KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZVRvZG8odG9kb1RpdGxlVG9CZURlbGV0ZWQpIHtcclxuICAgIHJldHVybiAodGhpcy50b2RvcyA9IHRoaXMudG9kb3MuZmlsdGVyKFxyXG4gICAgICAodG9kbykgPT4gdG9kby50aXRsZSAhPT0gdG9kb1RpdGxlVG9CZURlbGV0ZWRcclxuICAgICkpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUHJvamVjdDtcclxuIiwiaW1wb3J0IFByb2plY3QgZnJvbSBcIi4vcHJvamVjdFwiO1xyXG5cclxuY2xhc3MgVG9kb3Mge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5wcm9qZWN0cyA9IFtdO1xyXG4gICAgdGhpcy5wcm9qZWN0cy5wdXNoKG5ldyBQcm9qZWN0KFwiVG9kYXlcIikpO1xyXG4gICAgdGhpcy5wcm9qZWN0cy5wdXNoKG5ldyBQcm9qZWN0KFwiVGhpcyBXZWVrXCIpKTtcclxuICAgIHRoaXMucHJvamVjdHMucHVzaChuZXcgUHJvamVjdChcIlRoaXMgTW9udGhcIikpO1xyXG4gIH1cclxuXHJcbiAgZ2V0UHJvamVjdHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wcm9qZWN0cztcclxuICB9XHJcblxyXG4gIGdldFByb2plY3QocHJvamVjdE5hbWUpIHtcclxuICAgIHJldHVybiB0aGlzLnByb2plY3RzLmZpbmQoKHByb2opID0+IHByb2oubmFtZSA9PT0gcHJvamVjdE5hbWUpO1xyXG4gIH1cclxuXHJcbiAgYWRkUHJvamVjdChuZXdQcm9qZWN0T2JqZWN0KSB7XHJcbiAgICBpZiAodGhpcy5wcm9qZWN0cy5maW5kKChwcm9qKSA9PiBwcm9qLm5hbWUgPT09IG5ld1Byb2plY3RPYmplY3QubmFtZSkpXHJcbiAgICAgIHJldHVybjtcclxuICAgIHRoaXMucHJvamVjdHMucHVzaChuZXdQcm9qZWN0T2JqZWN0KTtcclxuICB9XHJcblxyXG4gIHNvcnRUb2RvcygpIHtcclxuICAgIGxldCB0b2RheVByb2plY3QgPSB0aGlzLmdldFByb2plY3QoXCJUb2RheVwiKTtcclxuICAgIGxldCBtb250aFByb2plY3QgPSB0aGlzLmdldFByb2plY3QoXCJUaGlzIE1vbnRoXCIpO1xyXG4gICAgbGV0IHdlZWtQcm9qZWN0ID0gdGhpcy5nZXRQcm9qZWN0KFwiVGhpcyBXZWVrXCIpO1xyXG5cclxuICAgIC8vIFN0YXJ0aW5nIGZyb20gbW9udGhMb29wLCB0aGlzIGZ1bmN0aW9uIGNoZWNrcyBpZiBhIHRvZG8ncyBkdWVEYXRlIGlzIGFjdHVhbGx5IHRoaXMgd2VlayBhbmQgc29ydHNcclxuICAgIC8vIEZyb20gdGhlcmUsIHRoZSB3ZWVrTG9vcCBmaXJlcyBhbmQgY2hlY2tzIGlmIGEgdG9kbydzIGR1ZURhdGUgaXMgYWN0dWFsbHkgdGhpcyB3ZWVrIG9yIGZvciB0b2RheSBhbmQgc29ydHNcclxuICAgIC8vIExhc3QsIHRoZSB0b2RheUxvb3AgZmlyZXMgYW5kIGNoZWNrcyBpZiBhIHRvZG8ncyBkdWVEYXRlIGlzIE5PVCB0b2RheVxyXG4gICAgICAvLyBpZiBpdCBpcyBub3QgZm9yIHRvZGF5LCBtb250aExvb3AgYW5kIHdlZWtMb29wIGZpcmVzIGFnYWluIGFuZCBzb3J0cyB0b2RvIHRvIHByb3BlciBwcm9qZWN0XHJcblxyXG4gICAgbW9udGhMb29wKG1vbnRoUHJvamVjdCwgd2Vla1Byb2plY3QsIHRvZGF5UHJvamVjdCk7XHJcbiAgICB3ZWVrTG9vcChtb250aFByb2plY3QsIHdlZWtQcm9qZWN0LCB0b2RheVByb2plY3QpO1xyXG4gICAgdG9kYXlMb29wKG1vbnRoUHJvamVjdCwgd2Vla1Byb2plY3QsIHRvZGF5UHJvamVjdCk7XHJcblxyXG4gIH1cclxufVxyXG5cclxuLy8gVVRJTCBGVU5DVElPTlNcclxuXHJcbmZ1bmN0aW9uIGRheXNJbk1vbnRoKG1vbnRoLCB5ZWFyKSB7XHJcbiAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoLCAwKS5nZXREYXRlKCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBtb250aExvb3AobW9udGhQcm9qLCB3ZWVrUHJvaiwgdG9kYXlQcm9qKSB7XHJcbiAgbGV0IG5ld0RhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gIGxldCBkYXRlID0gbmV3RGF0ZS5nZXREYXRlKCk7XHJcbiAgbGV0IG1vbnRoID0gbmV3RGF0ZS5nZXRNb250aCgpICsgMTtcclxuICBsZXQgeWVhciA9IG5ld0RhdGUuZ2V0RnVsbFllYXIoKTtcclxuXHJcbiAgbGV0IHRvZGF5ID0gZGF0ZSArIFwiLVwiICsgbW9udGggKyBcIi1cIiArIHllYXI7XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbW9udGhQcm9qLmdldFRvZG9zKCkubGVuZ3RoOyBpKyspIHtcclxuICAgIGxldCB0b2RvID0gbW9udGhQcm9qLmdldFRvZG9zKClbaV07XHJcbiAgICBsZXQgdG9kb0RhdGUgPSB0b2RvLmdldER1ZURhdGUoKTtcclxuXHJcbiAgICBsZXQgZGF0ZUFycmF5ID0gdG9kb0RhdGUuc3BsaXQoXCItXCIpO1xyXG4gICAgbGV0IHRvZG9EYXkgPSBOdW1iZXIoZGF0ZUFycmF5WzBdKTtcclxuICAgIGxldCB0b2RvTW9udGggPSBOdW1iZXIoZGF0ZUFycmF5WzFdKTtcclxuICAgIGxldCB0b2RvWWVhciA9IE51bWJlcihkYXRlQXJyYXlbMl0pO1xyXG5cclxuICAgIC8vIGZvciBjaGVja2luZyBpZiBlbmQgb2YgdGhlIHdlZWsgaXMgcGFzdCBudW1iZXIgb2YgZGF5cyBpbiBhIG1vbnRoXHJcbiAgICBsZXQgbnVtYmVyT2ZEYXlzSW5Nb250aCA9IGRheXNJbk1vbnRoKG1vbnRoLCB5ZWFyKTtcclxuICAgIGxldCBlbmRPZldlZWtEYXkgPSBkYXRlICsgNjtcclxuICAgIGxldCBlbmRPZk1vbnRoID0gbW9udGg7XHJcbiAgICBsZXQgZW5kT2ZZZWFyID0geWVhcjtcclxuXHJcbiAgICBpZiAoZW5kT2ZXZWVrRGF5ID4gbnVtYmVyT2ZEYXlzSW5Nb250aCkge1xyXG4gICAgICBlbmRPZldlZWtEYXkgPSAxO1xyXG4gICAgICBlbmRPZk1vbnRoICs9IDE7XHJcblxyXG4gICAgICAvLyByZXNldCBtb250aCB0byBKYW51YXJ5IGFuZCBhZGQgMSB0byB5ZWFyXHJcbiAgICAgIGlmIChlbmRPZk1vbnRoID09PSAxMykge1xyXG4gICAgICAgIGVuZE9mTW9udGggPSAxO1xyXG4gICAgICAgIGVuZE9mWWVhciArPSAxO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVmb3JtYXQgZm9yIHByb3BlciBjb21wYXJpc29uc1xyXG4gICAgbGV0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICBsZXQgZW5kT2ZXZWVrRGF0ZSA9IG5ldyBEYXRlKGVuZE9mWWVhciwgZW5kT2ZNb250aCAtIDEsIGVuZE9mV2Vla0RheSk7XHJcbiAgICBsZXQgdG9kb0R1ZURhdGUgPSBuZXcgRGF0ZSh0b2RvWWVhciwgdG9kb01vbnRoIC0gMSwgdG9kb0RheSk7XHJcblxyXG4gICAgaWYgKHRvZG9EdWVEYXRlID49IHN0YXJ0RGF0ZSAmJiB0b2RvRHVlRGF0ZSA8PSBlbmRPZldlZWtEYXRlKSB7XHJcbiAgICAgIHdlZWtQcm9qLmFkZFRvZG8odG9kbyk7XHJcbiAgICAgIG1vbnRoUHJvai5kZWxldGVUb2RvKHRvZG8udGl0bGUpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRvZG9EYXRlID09PSB0b2RheSkge1xyXG4gICAgICB0b2RheVByb2ouYWRkVG9kbyh0b2RvKTtcclxuICAgICAgbW9udGhQcm9qLmRlbGV0ZVRvZG8odG9kby50aXRsZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB3ZWVrTG9vcChtb250aFByb2osIHdlZWtQcm9qLCB0b2RheVByb2opIHtcclxuICBsZXQgbmV3RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgbGV0IGRhdGUgPSBuZXdEYXRlLmdldERhdGUoKTtcclxuICBsZXQgbW9udGggPSBuZXdEYXRlLmdldE1vbnRoKCkgKyAxO1xyXG4gIGxldCB5ZWFyID0gbmV3RGF0ZS5nZXRGdWxsWWVhcigpO1xyXG5cclxuICBsZXQgdG9kYXkgPSBkYXRlICsgXCItXCIgKyBtb250aCArIFwiLVwiICsgeWVhcjtcclxuXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB3ZWVrUHJvai5nZXRUb2RvcygpLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBsZXQgdG9kbyA9IHdlZWtQcm9qLmdldFRvZG9zKClbaV07XHJcbiAgICBpZiAodG9kby5nZXREdWVEYXRlKCkgPT09IHRvZGF5KSB7XHJcbiAgICAgIHRvZGF5UHJvai5hZGRUb2RvKHRvZG8pO1xyXG4gICAgICB3ZWVrUHJvai5kZWxldGVUb2RvKHRvZG8udGl0bGUpO1xyXG4gICAgfVxyXG5cclxuICAgIG1vbnRoTG9vcChtb250aFByb2osIHdlZWtQcm9qLCB0b2RheVByb2opXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB0b2RheUxvb3AobW9udGhQcm9qLCB3ZWVrUHJvaiwgdG9kYXlQcm9qKSB7XHJcbiAgbGV0IG5ld0RhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gIGxldCBkYXRlID0gbmV3RGF0ZS5nZXREYXRlKCk7XHJcbiAgbGV0IG1vbnRoID0gbmV3RGF0ZS5nZXRNb250aCgpICsgMTtcclxuICBsZXQgeWVhciA9IG5ld0RhdGUuZ2V0RnVsbFllYXIoKTtcclxuXHJcbiAgbGV0IHRvZGF5ID0gZGF0ZSArIFwiLVwiICsgbW9udGggKyBcIi1cIiArIHllYXI7XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdG9kYXlQcm9qLmdldFRvZG9zKCkubGVuZ3RoOyBpKyspIHtcclxuICAgIGxldCB0b2RvID0gdG9kYXlQcm9qLmdldFRvZG9zKClbaV07XHJcbiAgICBsZXQgdG9kb0RhdGUgPSB0b2RvLmdldER1ZURhdGUoKTtcclxuXHJcbiAgICBpZiAodG9kb0RhdGUgIT0gdG9kYXkpIHtcclxuICAgICAgbW9udGhQcm9qLmFkZFRvZG8odG9kbyk7XHJcbiAgICAgIHRvZGF5UHJvai5kZWxldGVUb2RvKHRvZG8udGl0bGUpO1xyXG5cclxuICAgICAgbW9udGhMb29wKG1vbnRoUHJvaiwgd2Vla1Byb2opO1xyXG4gICAgICB3ZWVrTG9vcChtb250aFByb2osIHdlZWtQcm9qLCB0b2RheVByb2opO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVG9kb3M7XHJcbiIsImltcG9ydCBUb2RvIGZyb20gXCIuL3RvZG9cIjtcclxuaW1wb3J0IFByb2plY3QgZnJvbSBcIi4vcHJvamVjdFwiO1xyXG5pbXBvcnQgVG9kb3MgZnJvbSBcIi4vVG9kb3NcIjtcclxuXHJcbi8vIFRFU1RcclxuLypsZXQgdGVzdFRvZG8gPSBuZXcgVG9kbyhcIlRvZG8gMVwiLCBcIm5ldyB0ZXN0IGZvciB0b2RvIGJveCAxXCIpO1xyXG5sZXQgdGVzdFRvZG8yID0gbmV3IFRvZG8oXCJUb2RvIDJcIiwgXCJuZXcgdGVzdCBmb3IgdG9kbyBib3ggMlwiKTtcclxubGV0IHRlc3RUb2RvMyA9IG5ldyBUb2RvKFwiVG9kbyAzXCIsIFwibmV3IHRlc3QgZm9yIHRvZG8gYm94IDNcIik7ICovXHJcbmxldCBkYXRlU29ydFRlc3QgPSBuZXcgVG9kbyhcIlRvZG8gNVwiLCBcIm5ldyB0ZXN0IGZvciBkYXRlIHNvcnRpbmdcIiwgXCIxNS0xLTIwMjVcIik7XHJcbmxldCBtb250aFRlc3QgPSBuZXcgVG9kbyhcIk1vbnRoIHRlc3RcIiwgXCJ0ZXN0aW5nIG1vbnRoIHNvcnRcIiwgXCIyNi0xLTIwMjVcIik7XHJcblxyXG5jb25zdCBhbGxUb2RvcyA9IG5ldyBUb2RvcygpO1xyXG5cclxuY29uc3QgdG9kYXlUb2RvcyA9IGFsbFRvZG9zLmdldFByb2plY3QoXCJUb2RheVwiKTtcclxuY29uc3Qgd2Vla1RvZG9zID0gYWxsVG9kb3MuZ2V0UHJvamVjdChcIlRoaXMgV2Vla1wiKTtcclxuY29uc3QgbW9udGhUb2RvcyA9IGFsbFRvZG9zLmdldFByb2plY3QoXCJUaGlzIE1vbnRoXCIpO1xyXG4vKlxyXG50b2RheVRvZG9zLmFkZFRvZG8odGVzdFRvZG8pO1xyXG50b2RheVRvZG9zLmFkZFRvZG8odGVzdFRvZG8yKTtcclxudG9kYXlUb2Rvcy5hZGRUb2RvKHRlc3RUb2RvMyk7XHJcbiovXHJcbnRvZGF5VG9kb3MuYWRkVG9kbyhkYXRlU29ydFRlc3QpO1xyXG5cclxubW9udGhUb2Rvcy5hZGRUb2RvKG1vbnRoVGVzdCk7XHJcblxyXG5hbGxUb2Rvcy5zb3J0VG9kb3MoKTtcclxuXHJcbi8vIERPTSBFTEVNRU5UU1xyXG5cclxuY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1ib2FyZFwiKTtcclxuY29uc3QgYWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXR0b24tYm94XCIpO1xyXG5jb25zdCB0b2RvRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1mb3JtXCIpO1xyXG5jb25zdCB0b2RvU3VibWl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jcmVhdGUtdG9kby1idG5cIik7XHJcbi8vIExpc3RlbmVyc1xyXG5cclxuYWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgdG9kb0Zvcm0uY2xhc3NMaXN0LnRvZ2dsZShcImludmlzaWJsZVwiKTtcclxuICBsZXQgcHJvamVjdCA9IHRvZG9Gb3JtLmVsZW1lbnRzLml0ZW0oMClcclxuICBsZXQgdGl0bGUgPSB0b2RvRm9ybS5lbGVtZW50cy5pdGVtKDEpO1xyXG4gIGxldCBkZXNjcmlwdGlvbiA9IHRvZG9Gb3JtLmVsZW1lbnRzLml0ZW0oMik7XHJcbiAgbGV0IGR1ZURhdGUgPSB0b2RvRm9ybS5lbGVtZW50cy5pdGVtKDMpO1xyXG5cclxuICB0aXRsZS52YWx1ZSA9IFwiXCI7XHJcbiAgZGVzY3JpcHRpb24udmFsdWUgPSBcIlwiO1xyXG4gIGR1ZURhdGUudmFsdWUgPSBcIlwiO1xyXG4gIHByb2plY3QudmFsdWUgPSBcInRvZGF5XCJcclxufSk7XHJcblxyXG50b2RvU3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBsZXQgcHJvamVjdCA9IHRvZG9Gb3JtLmVsZW1lbnRzLml0ZW0oMCk7XHJcbiAgbGV0IHRpdGxlID0gdG9kb0Zvcm0uZWxlbWVudHMuaXRlbSgxKTtcclxuICBsZXQgZGVzY3JpcHRpb24gPSB0b2RvRm9ybS5lbGVtZW50cy5pdGVtKDIpO1xyXG4gIGxldCBkdWVEYXRlID0gdG9kb0Zvcm0uZWxlbWVudHMuaXRlbSgzKTtcclxuXHJcbiAgaWYgKGR1ZURhdGUudmFsdWUgPT09IFwiXCIpIHtcclxuICAgIGNvbnN0IG5ld1RvZG8gPSBuZXcgVG9kbyh0aXRsZS52YWx1ZSwgZGVzY3JpcHRpb24udmFsdWUpO1xyXG5cclxuICAgIGlmIChwcm9qZWN0LnZhbHVlID09PSBcInRvZGF5XCIpIHtcclxuICAgICAgdG9kYXlUb2Rvcy5hZGRUb2RvKG5ld1RvZG8pO1xyXG4gICAgfSBlbHNlIGlmIChwcm9qZWN0LnZhbHVlID09PSBcInRoaXMgd2Vla1wiKSB7XHJcbiAgICAgIHdlZWtUb2Rvcy5hZGRUb2RvKG5ld1RvZG8pO1xyXG4gICAgfSBlbHNlIGlmIChwcm9qZWN0LnZhbHVlID09PSBcInRoaXMgbW9udGhcIikge1xyXG4gICAgICBtb250aFRvZG9zLmFkZFRvZG8obmV3VG9kbyk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGxldCByZWZvcm1hdHRlZER1ZURhdGUgPSByZWZvcm1hdERhdGUoZHVlRGF0ZS52YWx1ZSk7XHJcbiAgICBjb25zdCBuZXdUb2RvID0gbmV3IFRvZG8oXHJcbiAgICAgIHRpdGxlLnZhbHVlLFxyXG4gICAgICBkZXNjcmlwdGlvbi52YWx1ZSxcclxuICAgICAgcmVmb3JtYXR0ZWREdWVEYXRlXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChwcm9qZWN0LnZhbHVlID09PSBcInRvZGF5XCIpIHtcclxuICAgICAgdG9kYXlUb2Rvcy5hZGRUb2RvKG5ld1RvZG8pO1xyXG4gICAgfSBlbHNlIGlmIChwcm9qZWN0LnZhbHVlID09PSBcInRoaXMgd2Vla1wiKSB7XHJcbiAgICAgIHdlZWtUb2Rvcy5hZGRUb2RvKG5ld1RvZG8pO1xyXG4gICAgfSBlbHNlIGlmIChwcm9qZWN0LnZhbHVlID09PSBcInRoaXMgbW9udGhcIikge1xyXG4gICAgICBtb250aFRvZG9zLmFkZFRvZG8obmV3VG9kbyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcm9qZWN0LnZhbHVlID0gXCJ0b2RheVwiXHJcbiAgdGl0bGUudmFsdWUgPSBcIlwiO1xyXG4gIGRlc2NyaXB0aW9uLnZhbHVlID0gXCJcIjtcclxuICBkdWVEYXRlLnZhbHVlID0gXCJcIjtcclxuICB0b2RvRm9ybS5jbGFzc0xpc3QuYWRkKFwiaW52aXNpYmxlXCIpO1xyXG4gIGFsbFRvZG9zLnNvcnRUb2RvcygpXHJcbiAgc2hvd1Byb2plY3RzKCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gcmVmb3JtYXREYXRlKGRhdGUpIHtcclxuICBsZXQgZGF0ZUFycmF5ID0gZGF0ZS5zcGxpdChcIi1cIik7XHJcbiAgbGV0IG5ld0RhdGUgPSBuZXcgRGF0ZShkYXRlQXJyYXlbMF0sIGRhdGVBcnJheVsxXSwgZGF0ZUFycmF5WzJdKTtcclxuICBsZXQgZGF5ID0gbmV3RGF0ZS5nZXREYXRlKCk7XHJcbiAgbGV0IG1vbnRoID0gbmV3RGF0ZS5nZXRNb250aCgpO1xyXG4gIGxldCB5ZWFyID0gbmV3RGF0ZS5nZXRGdWxsWWVhcigpO1xyXG5cclxuICByZXR1cm4gYCR7ZGF5fS0ke21vbnRofS0ke3llYXJ9YDtcclxufVxyXG5cclxuLy8gRE9NIExvYWRlcnNcclxuXHJcbmZ1bmN0aW9uIHNob3dQcm9qZWN0cygpIHtcclxuICBtYWluLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAvLyB0byBlbnN1cmUgbm8gY29sb3IgcmVwZWF0c1xyXG4gIGxldCBjb2xvckFycmF5ID0gW1xyXG4gICAgXCIjRkFFRENCXCIsXHJcbiAgICBcIiNDOUU0REVcIixcclxuICAgIFwiI0M2REVGMVwiLFxyXG4gICAgXCIjRDhDREYwXCIsXHJcbiAgICBcIiNGMkM2REVcIixcclxuICAgIFwiI0Y3RDlDNFwiLFxyXG4gIF07XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsVG9kb3MuZ2V0UHJvamVjdHMoKS5sZW5ndGg7IGkrKykge1xyXG4gICAgbGV0IHByb2plY3QgPSBhbGxUb2Rvcy5nZXRQcm9qZWN0cygpW2ldO1xyXG5cclxuICAgIGxldCBwcm9qZWN0Qm94ID0gY3JlYXRlUHJvamVjdEJveChwcm9qZWN0KTtcclxuXHJcbiAgICAvLyBDb2xvciBlYWNoIHByb2plY3QgaGVhZGVyIGRpZmZlcmVudGx5XHJcblxyXG4gICAgbGV0IGJnQ29sb3JJbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICg1IC0gMCkpICsgMDtcclxuICAgIGxldCBiZ0NvbG9yID0gY29sb3JBcnJheVtiZ0NvbG9ySW5kZXhdO1xyXG4gICAgbGV0IHByb2plY3RIZWFkZXIgPSBwcm9qZWN0Qm94LmNoaWxkTm9kZXNbMF07XHJcblxyXG4gICAgcHJvamVjdEhlYWRlci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBiZ0NvbG9yO1xyXG5cclxuICAgIC8vIFJlbW92ZSBjb2xvciBmcm9tIGFycmF5IHNvIGl0IGNhbid0IGJlIHBpY2tlZCBhZ2FpblxyXG4gICAgY29sb3JBcnJheS5zcGxpY2UoYmdDb2xvckluZGV4LCAxKTtcclxuXHJcbiAgICBtYWluLmFwcGVuZENoaWxkKHByb2plY3RCb3gpO1xyXG4gIH1cclxufVxyXG5cclxuc2hvd1Byb2plY3RzKCk7XHJcblxyXG4vLyBET00gQ3JlYXRpb24gRnVuY3Rpb25zXHJcblxyXG5mdW5jdGlvbiBjcmVhdGVQcm9qZWN0Qm94KHByb2plY3RPYmplY3QpIHtcclxuICBjb25zdCBwcm9qZWN0Qm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBwcm9qZWN0Qm94LmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LWJveFwiKTtcclxuXHJcbiAgY29uc3QgcHJvamVjdEhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gIHByb2plY3RIZWFkZXIuY2xhc3NMaXN0LmFkZChcInByb2plY3QtaGVhZGVyXCIpO1xyXG4gIHByb2plY3RIZWFkZXIudGV4dENvbnRlbnQgPSBwcm9qZWN0T2JqZWN0Lm5hbWU7XHJcblxyXG4gIGNvbnN0IHByb2plY3RUb2RvcyA9IHByb2plY3RPYmplY3QuZ2V0VG9kb3MoKTtcclxuXHJcbiAgcHJvamVjdEJveC5hcHBlbmRDaGlsZChwcm9qZWN0SGVhZGVyKTtcclxuXHJcbiAgaWYgKHByb2plY3RUb2Rvcy5sZW5ndGggIT0gMCkge1xyXG4gICAgY29uc3QgdG9kb0JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICB0b2RvQm94LmNsYXNzTGlzdC5hZGQoXCJ0b2RvLWJveFwiKTtcclxuICAgIHRvZG9Cb3guY2xhc3NMaXN0LmFkZChcInZpc2libGVcIik7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9qZWN0VG9kb3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbGV0IHRvZG8gPSBwcm9qZWN0VG9kb3NbaV07XHJcbiAgICAgIGxldCB0b2RvRWwgPSBjcmVhdGVUb2RvQm94KHRvZG8pO1xyXG5cclxuICAgICAgaWYgKGkgJSAyID09IDEpIHtcclxuICAgICAgICB0b2RvRWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjZTRlNGU0XCI7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdG9kb0VsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdG9kb0JveC5hcHBlbmRDaGlsZCh0b2RvRWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb2plY3RCb3guYXBwZW5kQ2hpbGQodG9kb0JveCk7XHJcblxyXG4gICAgLy8gTGlzdGVuZXJzXHJcblxyXG4gICAgcHJvamVjdEJveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgdG9kb0JveC5jbGFzc0xpc3QudG9nZ2xlKFwidmlzaWJsZVwiKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHByb2plY3RCb3g7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVRvZG9Cb3godG9kb09iamVjdCkge1xyXG4gIGNvbnN0IHRvZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIHRvZG8uY2xhc3NMaXN0LmFkZChcInRvZG9cIik7XHJcblxyXG4gIGNvbnN0IGNoZWNrQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gIGNoZWNrQm94LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJjaGVja2JveFwiKTtcclxuICBjaGVja0JveC5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkLWlkXCIsIFwiY2hlY2tib3hcIik7XHJcblxyXG4gIGNvbnN0IHRvZG9UaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gIHRvZG9UaXRsZS5jbGFzc0xpc3QuYWRkKFwidG9kby10aXRsZVwiKTtcclxuICB0b2RvVGl0bGUudGV4dENvbnRlbnQgPSB0b2RvT2JqZWN0LnRpdGxlO1xyXG5cclxuICBjb25zdCB0b2RvRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gIHRvZG9EYXRlLmNsYXNzTGlzdC5hZGQoXCJ0b2RvLWRhdGVcIik7XHJcbiAgdG9kb0RhdGUudGV4dENvbnRlbnQgPSB0b2RvT2JqZWN0LmdldER1ZURhdGUoKTtcclxuXHJcbiAgY29uc3QgY2hlY2tUaXRsZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGNoZWNrVGl0bGVEYXRlLmNsYXNzTGlzdC5hZGQoXCJjaGVjay10aXRsZS1kYXRlXCIpO1xyXG5cclxuICBjaGVja1RpdGxlRGF0ZS5hcHBlbmQoY2hlY2tCb3gsIHRvZG9UaXRsZSwgdG9kb0RhdGUpO1xyXG5cclxuICBjb25zdCB0b2RvRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICB0b2RvRGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZChcInRvZG8tZGVzY3JpcHRpb25cIik7XHJcbiAgdG9kb0Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdG9kb09iamVjdC5kZXNjcmlwdGlvbjtcclxuXHJcbiAgLy8gTGlzdGVuZXJzXHJcblxyXG4gIHRvZG8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICBpZiAoZS50YXJnZXQgIT0gdG9kb1RpdGxlKSB7XHJcbiAgICAgIHRvZG9EZXNjcmlwdGlvbi5jbGFzc0xpc3QudG9nZ2xlKFwidmlzaWJsZVwiKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgdG9kb1RpdGxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICB0b2RvVGl0bGUuY29udGVudEVkaXRhYmxlID0gdHJ1ZTtcclxuICB9KTtcclxuXHJcbiAgdG9kby5hcHBlbmQoY2hlY2tUaXRsZURhdGUsIHRvZG9EZXNjcmlwdGlvbik7XHJcblxyXG4gIHJldHVybiB0b2RvO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwidGhpcyIsImdldFRpdGxlIiwic2V0VGl0bGUiLCJuZXdUaXRsZSIsImdldERlc2NyaXB0aW9uIiwic2V0RGVzY3JpcHRpb24iLCJuZXdEZXNjcmlwdGlvbiIsImdldER1ZURhdGUiLCJuZXdEYXRlIiwiRGF0ZSIsImdldERhdGUiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwic2V0RGF0ZSIsIm5hbWUiLCJ0b2RvcyIsImdldE5hbWUiLCJzZXROYW1lIiwibmV3TmFtZSIsImdldFRvZG9zIiwiZ2V0VG9kbyIsImNob3NlblRvZG9PYmplY3QiLCJmaW5kIiwidG9kbyIsImFkZFRvZG8iLCJ0b2RvT2JqZWN0IiwicHVzaCIsImRlbGV0ZVRvZG8iLCJ0b2RvVGl0bGVUb0JlRGVsZXRlZCIsImZpbHRlciIsImRheXNJbk1vbnRoIiwibW9udGgiLCJ5ZWFyIiwibW9udGhMb29wIiwibW9udGhQcm9qIiwid2Vla1Byb2oiLCJ0b2RheVByb2oiLCJkYXRlIiwidG9kYXkiLCJpIiwibGVuZ3RoIiwidG9kb0RhdGUiLCJkYXRlQXJyYXkiLCJzcGxpdCIsInRvZG9EYXkiLCJOdW1iZXIiLCJ0b2RvTW9udGgiLCJ0b2RvWWVhciIsImVuZE9mV2Vla0RheSIsImVuZE9mTW9udGgiLCJlbmRPZlllYXIiLCJzdGFydERhdGUiLCJlbmRPZldlZWtEYXRlIiwidG9kb0R1ZURhdGUiLCJ3ZWVrTG9vcCIsImRhdGVTb3J0VGVzdCIsIm1vbnRoVGVzdCIsImFsbFRvZG9zIiwicHJvamVjdHMiLCJnZXRQcm9qZWN0cyIsImdldFByb2plY3QiLCJwcm9qZWN0TmFtZSIsInByb2oiLCJhZGRQcm9qZWN0IiwibmV3UHJvamVjdE9iamVjdCIsInNvcnRUb2RvcyIsInRvZGF5UHJvamVjdCIsIm1vbnRoUHJvamVjdCIsIndlZWtQcm9qZWN0IiwidG9kYXlMb29wIiwidG9kYXlUb2RvcyIsIndlZWtUb2RvcyIsIm1vbnRoVG9kb3MiLCJtYWluIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkQnRuIiwidG9kb0Zvcm0iLCJ0b2RvU3VibWl0QnRuIiwic2hvd1Byb2plY3RzIiwidGV4dENvbnRlbnQiLCJjb2xvckFycmF5IiwicHJvamVjdEJveCIsImNyZWF0ZVByb2plY3RCb3giLCJiZ0NvbG9ySW5kZXgiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJiZ0NvbG9yIiwiY2hpbGROb2RlcyIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwic3BsaWNlIiwiYXBwZW5kQ2hpbGQiLCJwcm9qZWN0T2JqZWN0IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInByb2plY3RIZWFkZXIiLCJwcm9qZWN0VG9kb3MiLCJ0b2RvQm94IiwidG9kb0VsIiwiY3JlYXRlVG9kb0JveCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidG9nZ2xlIiwiY2hlY2tCb3giLCJzZXRBdHRyaWJ1dGUiLCJ0b2RvVGl0bGUiLCJjaGVja1RpdGxlRGF0ZSIsImFwcGVuZCIsInRvZG9EZXNjcmlwdGlvbiIsInRhcmdldCIsImNvbnRlbnRFZGl0YWJsZSIsInByb2plY3QiLCJlbGVtZW50cyIsIml0ZW0iLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwibmV3VG9kbyIsInJlZm9ybWF0dGVkRHVlRGF0ZSIsInJlZm9ybWF0RGF0ZSJdLCJzb3VyY2VSb290IjoiIn0=